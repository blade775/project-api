<html  lang="en" >
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="api.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
   <!-- google icons -->
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- import axios -->
    <script src="node_modules/axios/dist/axios.min.js"></script>
    <!-- import boostrap icons -->
    
    <!-- import bootstrap -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<style>
    label{
        width: 50px;
        height: 20px;
       position: relative;
       display: block;
       background-color: whitesmoke;
       border-radius: 200px;
       box-shadow: inset 0px 5px 15px rgba(0, 0, 0, 0.4),inset 0px -5px 15px rgba(red, green, blue, 0.4);
       cursor: pointer; 
       transition: 0.3s;
    }
    label:after{
        content: "";
        width: 20px;
        height: 20px;
        position: absolute;
        left: 1px;
        background:linear-gradient(180deg ,rgb(255, 171, 14),grey,black) ;
        border-radius: 180px;
        box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        
    }
    input{
        height: 0;
        width: 0;
        visibility: hidden;
    }
    input:checked + label{
        background-color: rgb(83, 82, 82);
    }
    input:checked + label:after{
        left:30px;
        transform: translate3d(-100%);
        background: linear-gradient(180deg,grey,black);
    }

    label:active:after{
        width: 25px;
    }


    /* Dark Mode Styles */
body[data-bs-theme="dark"] {
    background-color: #272727; /* Dark background color */
    color: #ffffff; /* White text color */
}



.number-info{
    color: rgb(148, 248, 218);
    font-weight: 100;
}
.number-info span{
    font-size: 50px;
    color: rgb(135, 164, 241);
}
.user-main-info{
    font-weight: 500;
    font-size: 20px;
}
/*==== LOADER STYLES ============= */

.lds-dual-ring {
        display: inline-block;
        width: 80px;
        height: 80px;
        }
        .lds-dual-ring:after {
        content: " ";
        display: block;
        width: 64px;
        height: 64px;
        margin: 8px;
        border-radius: 50%;
        border: 6px solid rgb(148, 236, 104);
        border-color: rgb(148, 236, 104) transparent #dfc transparent;
        animation: lds-dual-ring 1.2s linear infinite;
        }
        @keyframes lds-dual-ring {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
        }

</style>

</head>

<body id="change" data-bs-theme="light">
    <!-- LOADER -->
    <div id="loader" style="position: fixed;top: 0px;bottom: 0px; left: 0px;right: 0px;margin:auto auto; display: flex;justify-content: center;align-items: center;z-index:99999;">
        <div class="lds-dual-ring"></div>
               
        </div>
         <!-- LOADER -->
    <!-- ============ALERTS=========== -->
    <div id="success-alert" class="show fade" style="position: fixed;z-index: 999999;width: 30%; bottom: 0;right: 0;" ></div>
    


    <!-- ========MODALS========= -->
    
    <!-- Modal LOGING -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Login</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            <div class="modal-body">
                <form>
                <div class="mb-3">
                    <p>Enter your username:</p>
                    
                    <input style="visibility: visible; width:100%;height: 30px;  border: solid 1px rgba(74, 75, 75, 0.678);" type="text" id="loginuser" placeholder=" Enter your username" required>
                        
                </div>
                <div class="mb-3">
                    <p>Enter your password:</p>
                    <input style="visibility: visible; width: 100%;height: 30px;  border: solid 1px rgba(77, 77, 77, 0.507);" type="password" id="pass" placeholder="  Enter your password" required>   
                    <p style=" display: flex;justify-content: center;margin-top: 8px; color: red; font-weight: 100; font-size: small;" id="error"></p>
                </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button id="log-btn" type="button" class="btn btn-primary">Login</button>
            </div>
            </div>
        </div>
    </div>
        <!-- //Modal LOGING //-->

            <!-- regiester modal -->
    <div class="modal fade" id="reg-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">register A New User</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                <div class="mb-3">
                    <h1>image</h1>
                    
                    <input style="visibility: visible; width: 100%;height: 30px;  border: solid 1px rgba(74, 75, 75, 0.678);" type="file" id="profile-img" placeholder=" Example:Area 51" required>
                </div>
                <div class="mb-3">
                    <p>Name</p>
                    
                    <input style="visibility: visible; width: 100%;height: 30px;  border: solid 1px rgba(74, 75, 75, 0.678);" type="text" id="reg-name-input" placeholder=" Enter your username" required>
                        
                </div>
                <div class="mb-3">
                    <p>Enter your username:</p>
                    
                    <input style="visibility: visible; width: 100%;height: 30px;  border: solid 1px rgba(74, 75, 75, 0.678);" type="text" id="reg-username-input" placeholder=" Enter your username" required>
                        
                </div>
                <div class="mb-3">
                    <p>Enter your password:</p>
                    <input style="visibility: visible; width: 100%;height: 30px;  border: solid 1px rgba(77, 77, 77, 0.507);" type="password" id="reg-pass-input" placeholder="  Enter your password" required>   
                    <p style=" display: flex;justify-content: center;margin-top: 8px; color: red; font-weight: 100; font-size: small;" id="error-reg" ></p>
                </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button id="create-account" onclick="registerbtn()" type="button" class="btn btn-primary">Register</button>
            </div>
            </div>
        </div>
        </div>
            <!-- //regiester modal //-->

            <!-- create post  modal-->
            <div class="modal fade" id="createpost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="post-modal-title">Create A new Post </h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                        <div class="mb-3">
                            <h1>image</h1>
                            
                            <input style="visibility: visible; width: 100%;height: 30px;  border: solid 1px rgba(74, 75, 75, 0.678);" type="file" id="img-post" placeholder=" Example:Area 51" required>
                        </div>
                        <div class="mb-3">
                            <h1>title!</h1>
                            
                            <input id="title-content" style="visibility: visible; width: 100%;height: 30px;  border: solid 1px rgba(74, 75, 75, 0.678);" type="text" id="title-post" placeholder=" Example:Area 51" required>
                            <input type="hidden" id="post-id" value="false">      
                        </div>
                        <div class="mb-3">
                            <h4>Content</h4>
                            <textarea id="post-content" class="form-control"  rows="3"></textarea>
    
                        </div>
                        <p style=" display: flex;justify-content: center;margin-top: 8px; color: red; font-weight: 100; font-size: small;" id="error-post" ></p>

                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="post-btn" type="button" class="btn btn-primary" onclick="createPost()">Post</button>
                    </div>
                    </div>
                </div>
            </div>
            <!-- //create post modal // -->

              <!-- DELETE post  modal-->
            <div class="modal fade" id="deletepost" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="post-modal-title">Are You Sure You Want To Delete The Post? 
                            <span id="delete-post"></span>
                        </h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        <input type="hidden" id="delete-post-input" value="">
                    </div>
                   
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="post-btn" type="button" class="btn btn-danger" onclick="confirmDelete()">Delete</button>
                    </div>
                    </div>
                </div>
            </div>
            <!-- //DELETE post modal // -->

                    <!-- nav bar -->
    <nav  class="navbar navbar-expand-lg bg-success shadow position-fixed z-3 w-100 ">
        <div class="container-fluid">
          <a class="navbar-brand" href="index.html">Posty</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="profileclicked()" style="cursor: pointer;" >Profile</a>
              </li>
            </ul>

            <!-- for none log users -->
            <div id="change-to-logout">
                <button  id="login-btn" type="button" class="btn btn-outline-light  me-2"  data-bs-toggle="modal" data-bs-target="#exampleModal" >Login</button>
                <button id="register-btn" type="button" class="btn btn-outline-light me-5"  data-bs-toggle="modal" data-bs-target="#reg-modal" >Register</button>
            </div>
            <!--////for none log users ///-->
            <!-- after log in -->
            <div id="profile" style="margin-right: 10px;">

            </div>
            
            <div id="logout-btn">
                <button   onclick="logOut()" type="button" class="btn btn-outline-danger text-light me-5" >Logout</button>
                <button id="add-post" type="button" class="btn btn-primary  "  onclick="addBtnClicked()" style="width: 50px;height: 50px; position: fixed; bottom: 60;right: 60; border-radius: 50%; box-shadow:0px 9px 9px rgba(0, 0, 0, 0.4);">
                    <span class="material-symbols-outlined">
                    add
                    </span>
                </button>            
            </div>
                <!--// after log in// -->   


            <input  type="checkbox" role="switch" id="darkmode-toggle">
            <label for="darkmode-toggle" data-bs-theme="dark"><span style="  float: left; font-size: 20px;" class="material-symbols-outlined" >
                light_mode
                </span> <span style="float: right; font-size: 20px;" class="material-symbols-outlined">
                dark_mode
                </span></label>
           
          </div>
        </div>
    </nav>
        <!-- //nav bar// -->


        <!-- container -->
    <div class="container  d-flex justify-content-center " style="height: 1000px;" >
        <!-- Header -->
        <div  class="  col-8 mt-5 " >
        
            <!-- MAIN INFO -->
                <div class="card-body  mt-5 border shadow bg-secondary bg-gradient" style="margin-right: 20px;">
                    <div class="row" style="padding:  6px;">
                        <!-- USER IMAGE COL -->
                        <div class="col-2" >
                            <img id="img" src="d.jpg"id="header-img" alt="" style="width: 120px;height: 120px;border-radius: 200px !important;margin-top: 8px;">
                        </div>

                        <!-- USER AND EMAIL AND NAME -->
                        <div class="col-4 d-flex flex-column justify-content-evenly ms-3" style="font-weight: 900;" id="info">
                            <div class="user-main-info" id="email">
                                Yousef77@gmail.com
                            </div>
                            <div class="user-main-info" id="name">
                                yousef
                            </div>
                            <div class="user-main-info" id="username">
                                blade
                            </div>


                        </div>
                        <!-- //USER AND EMAIL AND NAME// -->

                        <!-- Post and comments counts -->
                        <div class="col-4 d-flex flex-column justify-content-evenly ms-3" id="posts-comments">
                            <div class="number-info">
                                <span id="post-count">13</span>Posts
                            </div>
                            <div class="number-info">
                                <span id="comment-count">40</span>Comments
                            </div>

                        </div>
                        <!--// Post and comments counts// -->

                    </div>
                    
                  
                </div>
                  <!--// MAIN INFO //-->
                <!-- POST TITLE -->
                <div class="row mt-5" >
                    <h1> <span id="name-posts">Yousef's</span>  Posts</h1>
                </div>
                <!-- //POST //TITLE ////-->


                <!-- POSTS -->
            <div class="rounded-5 row" id="user-posts">
                    <!-- POST -->
                <div class="card  bg-success bg-gradient shadow rounded-5 my-4 ">
                    <div class="card-header">
                        <img class="rounded-5 border " src="d.jpg" alt="" style="width: 40px;height:40px;">
                        <b>yOUSEF</b>
                        
                    </div>
                    <div class="card-body"  onclick="postClicked(post.id)" style="cursor:pointer;">
                        <img class="w-100 img-fluid "  src="${post.image}" alt="">

                        <h6 style="font-size: 13px; margin-top: 2px; margin-left: 15px;">${post.created_at}</h6>

                        <h4></h4>
                        <p>${post.body}</p>
                        <hr>
                        <div style="display: inline;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                                <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                            </svg>
                            <span>${post.comments_count} Comments</span>
                            <span id="post-tags-${post.id}">

                            
                            </span>
                        </div>
                    </div>
                </div>
                <!--// POST //-->
            </div> 
        <!-- //POSTS // -->
        </div>

    </div>
</body>
<script src="mainLogic.js"></script>
<script src="profileScript.js"></script>

<script>
    document.getElementById("log-btn").addEventListener("click",()=>{
    let valueUser=document.getElementById("loginuser").value
    let valuepass= document.getElementById("pass").value
    toggleLoader(true)
    axios.post("https://tarmeezacademy.com/api/v1/login",
    {
        "username" : valueUser,
        "password" : valuepass

    })
    .then(response=>{
        toggleLoader(false)

        let token=response.data.token
        console.log(response.data)
        localStorage.setItem("token",token)
        localStorage.setItem("user",JSON.stringify(response.data.user))
       const modal =document.getElementById('exampleModal')
       const modalInstance=bootstrap.Modal.getInstance(modal)
       modalInstance.hide()
       setUi()
       afterlogin("logged in successfully")
    }).catch(function (error) {
        // handle error
        document.getElementById("error").innerHTML= error.response.data.message
    }).finally(()=>{
        toggleLoader(false)
    })
})

</script>
</html>